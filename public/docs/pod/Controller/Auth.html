<html><head><title>Scot::Controller::Auth</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../_grygrnw.css" media="all" >

<script type="text/javascript" src="../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.35,
  using Pod::Simple::PullParser v3.35,
  under Perl v5.022001 at Wed Sep  5 21:11:54 2018 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#Scot%3A%3AController%3A%3AAuth'>Scot::Controller::Auth</a>
  <li class='indexItem indexItem1'><a href='#POD_ERRORS'>POD ERRORS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="Scot::Controller::Auth"
>Scot::Controller::Auth</a></h1>

<p>Authentication and Authorization</p>

<dl>
<dt><a name="check"
><b>check</b></a></dt>

<dd>
<p>This sub gets called on every route under /scot.
This routine checks the authentication status of the request.</p>

<pre>    First, we look for a mojolicious session.  
    The presence of that indicates that 
    the use has been authenticated and we can return true.

    Second, we look for an API token.  If we find a valid one, then we are good.
    Finally, we either do a Local authentication or 
    we redirect to an Apache Authentication
    landing that will do SSO for us.</pre>

<dt><a name="login"
><b>login</b></a></dt>

<dd>
<p>this route will generate a web based form for login</p>

<dt><a name="logout"
><b>logout</b></a></dt>

<dd>
<p>this route will clear the session cookie that will force a reauthentication, although if you are using basic auth, the browser may need to be quick and restarted to fully log out.</p>

<dt><a name="auth"
><b>auth</b></a></dt>

<dd>
<p>this is the route that the form posts username and password to we then check for validity and then try to authenticate via ldap and then local</p>

<dt><a name="sso"
><b>sso</b></a></dt>

<dd>
<p>this route is called to a route that will do the SSO (single sign on). Essentially, we are relying on the apache config wrapped around the /sso location to authenticate the user (via kerberos, or someother authentication system). The apache config then sets a remote_user header that is passed to the scot server. (this is ok because only the apache server can talk to the scot server.) If we pull apache and scot apart to seperate systems we will need to otherwise lock this connection down</p>

<dt><a name="invalid_user_pass"
><b>invalid_user_pass</b></a></dt>

<dd>
<p>this subroutine checks for common problems in a username or password</p>

<dt><a name="authenticate_via_ldap"
><b>authenticate_via_ldap</b></a></dt>

<dd>
<p>return true if the ldap server is available and authenticates the user</p>

<dt><a name="ldap_authenticates"
><b>ldap_authenticates</b></a></dt>

<dd>
<p>returns true if Scot::Util::Ldap-&#62;authenticate_user returns true</p>

<dt><a name="authenticate_via_local"
><b>authenticate_via_local</b></a></dt>

<dd>
<p>authenticate a user against the users collection</p>

<dt><a name="valid_mojo_session"
><b>valid_mojo_session</b></a></dt>

<dd>
<p>checks for the presence of a valid mojo session cookie</p>

<dt><a name="valid_authorization_header"
><b>valid_authorization_header</b></a></dt>

<dd>
<p>checks for either basic or api in the Authorization key</p>

<dt><a name="valid_remoteuser"
><b>valid_remoteuser</b></a></dt>

<dd>
<p>checks for a valid remote user</p>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="POD_ERRORS"
>POD ERRORS</a></h1>

<p>Hey! <b>The above document had some coding errors, which are explained below:</b></p>

<dl>
<dt><a name="Around_line_21:"
>Around line 21:</a></dt>

<dd>
<p>&#39;=item&#39; outside of any &#39;=over&#39;</p>

<p>=over without closing =back</p>
</dd>
</dl>
<p class="backlinkbottom"><b><a name="___bottom" href="../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
