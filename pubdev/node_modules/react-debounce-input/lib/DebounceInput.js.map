{"version":3,"sources":["../src/DebounceInput.js"],"names":[],"mappings":"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","file":"DebounceInput.js","sourcesContent":["import React from 'react';\nimport debounce from 'lodash.debounce';\nimport {shouldComponentUpdate} from 'react/lib/ReactComponentWithPureRenderMixin';\n\n\nconst DebounceInput = React.createClass({\n  propTypes: {\n    onChange: React.PropTypes.func.isRequired,\n    onKeyDown: React.PropTypes.func,\n    onBlur: React.PropTypes.func,\n    value: React.PropTypes.string,\n    minLength: React.PropTypes.number,\n    debounceTimeout: React.PropTypes.number,\n    forceNotifyByEnter: React.PropTypes.bool,\n    forceNotifyOnBlur: React.PropTypes.bool\n  },\n\n\n  getDefaultProps() {\n    return {\n      minLength: 0,\n      debounceTimeout: 100,\n      forceNotifyByEnter: true,\n      forceNotifyOnBlur: true\n    };\n  },\n\n\n  getInitialState() {\n    return {\n      value: this.props.value || ''\n    };\n  },\n\n\n  componentWillMount() {\n    this.createNotifier(this.props.debounceTimeout);\n  },\n\n\n  componentWillReceiveProps({value, debounceTimeout}) {\n    if (typeof value !== 'undefined' && this.state.value !== value) {\n      this.setState({value});\n    }\n    if (debounceTimeout !== this.props.debounceTimeout) {\n      this.createNotifier(debounceTimeout);\n    }\n  },\n\n\n  shouldComponentUpdate,\n\n\n  componentWillUnmount() {\n    if (this.notify.cancel) {\n      this.notify.cancel();\n    }\n  },\n\n\n  createNotifier(debounceTimeout) {\n    if (debounceTimeout < 0) {\n      this.notify = () => null;\n    } else if (debounceTimeout === 0) {\n      this.notify = this.props.onChange;\n    } else {\n      this.notify = debounce(this.props.onChange, debounceTimeout);\n    }\n  },\n\n\n  forceNotify(event) {\n    if (this.notify.cancel) {\n      this.notify.cancel();\n    }\n\n    const {value} = this.state;\n    const {minLength, onChange} = this.props;\n\n    if (value.length >= minLength) {\n      onChange(event);\n    } else {\n      onChange({...event, target: {...event.target, value}});\n    }\n  },\n\n\n  onChange(event) {\n    event.persist();\n\n    const oldValue = this.state.value;\n\n    this.setState({value: event.target.value}, () => {\n      const {value} = this.state;\n\n      if (value.length >= this.props.minLength) {\n        this.notify(event);\n        return;\n      }\n\n      // If user hits backspace and goes below minLength consider it cleaning the value\n      if (oldValue.length > value.length) {\n        this.notify({...event, target: {...event.target, value: ''}});\n      }\n    });\n  },\n\n\n  render() {\n    const {onChange, value: v, minLength, debounceTimeout,\n      forceNotifyByEnter, forceNotifyOnBlur,\n      ...props} = this.props;\n\n    const onKeyDown = forceNotifyByEnter ? {\n      onKeyDown: event => {\n        if (event.key === 'Enter') {\n          this.forceNotify(event);\n        }\n        // Invoke original onKeyDown if present\n        if (this.props.onKeyDown) {\n          this.props.onKeyDown(event);\n        }\n      }\n    } : {};\n\n    const onBlur = forceNotifyOnBlur ? {\n      onBlur: event => {\n        this.forceNotify(event);\n        // Invoke original onBlur if present\n        if (this.props.onBlur) {\n          this.props.onBlur(event);\n        }\n      }\n    } : {};\n\n    return (\n      <input type=\"text\"\n        {...props}\n        value={this.state.value}\n        onChange={this.onChange}\n        {...onKeyDown}\n        {...onBlur} />\n    );\n  }\n});\n\n\nexport default DebounceInput;\n"]}