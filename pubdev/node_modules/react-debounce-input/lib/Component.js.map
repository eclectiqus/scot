{"version":3,"sources":["../src/Component.js"],"names":[],"mappings":"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","file":"Component.js","sourcesContent":["import React from 'react';\nimport debounce from 'lodash.debounce';\nimport {shouldComponentUpdate} from 'react/lib/ReactComponentWithPureRenderMixin';\n\n\nexport const DebounceInput = React.createClass({\n  propTypes: {\n    element: React.PropTypes.oneOfType([React.PropTypes.string, React.PropTypes.func]),\n    type: React.PropTypes.string,\n    onChange: React.PropTypes.func.isRequired,\n    onKeyDown: React.PropTypes.func,\n    onBlur: React.PropTypes.func,\n    value: React.PropTypes.oneOfType([\n      React.PropTypes.string,\n      React.PropTypes.number\n    ]),\n    minLength: React.PropTypes.number,\n    debounceTimeout: React.PropTypes.number,\n    forceNotifyByEnter: React.PropTypes.bool,\n    forceNotifyOnBlur: React.PropTypes.bool\n  },\n\n\n  getDefaultProps() {\n    return {\n      element: 'input',\n      type: 'text',\n      minLength: 0,\n      debounceTimeout: 100,\n      forceNotifyByEnter: true,\n      forceNotifyOnBlur: true\n    };\n  },\n\n\n  getInitialState() {\n    return {\n      value: this.props.value || ''\n    };\n  },\n\n\n  componentWillMount() {\n    this.createNotifier(this.props.debounceTimeout);\n  },\n\n\n  componentWillReceiveProps({value, debounceTimeout}) {\n    if (typeof value !== 'undefined' && this.state.value !== value) {\n      this.setState({value});\n    }\n    if (debounceTimeout !== this.props.debounceTimeout) {\n      this.createNotifier(debounceTimeout);\n    }\n  },\n\n\n  shouldComponentUpdate,\n\n\n  componentWillUnmount() {\n    if (this.notify.cancel) {\n      this.notify.cancel();\n    }\n  },\n\n\n  createNotifier(debounceTimeout) {\n    if (debounceTimeout < 0) {\n      this.notify = () => null;\n    } else if (debounceTimeout === 0) {\n      this.notify = this.props.onChange;\n    } else {\n      this.notify = debounce(this.props.onChange, debounceTimeout);\n    }\n  },\n\n\n  forceNotify(event) {\n    if (this.notify.cancel) {\n      this.notify.cancel();\n    }\n\n    const {value} = this.state;\n    const {minLength, onChange} = this.props;\n\n    if (value.length >= minLength) {\n      onChange(event);\n    } else {\n      onChange({...event, target: {...event.target, value}});\n    }\n  },\n\n\n  onChange(event) {\n    event.persist();\n\n    const oldValue = this.state.value;\n\n    this.setState({value: event.target.value}, () => {\n      const {value} = this.state;\n\n      if (value.length >= this.props.minLength) {\n        this.notify(event);\n        return;\n      }\n\n      // If user hits backspace and goes below minLength consider it cleaning the value\n      if (oldValue.length > value.length) {\n        this.notify({...event, target: {...event.target, value: ''}});\n      }\n    });\n  },\n\n\n  render() {\n    const {\n      element,\n      onChange: _onChange,\n      value: _value,\n      minLength: _minLength,\n      debounceTimeout: _debounceTimeout,\n      forceNotifyByEnter,\n      forceNotifyOnBlur,\n      ...props\n    } = this.props;\n\n    const onKeyDown = forceNotifyByEnter ? {\n      onKeyDown: event => {\n        if (event.key === 'Enter') {\n          this.forceNotify(event);\n        }\n        // Invoke original onKeyDown if present\n        if (this.props.onKeyDown) {\n          this.props.onKeyDown(event);\n        }\n      }\n    } : {};\n\n    const onBlur = forceNotifyOnBlur ? {\n      onBlur: event => {\n        this.forceNotify(event);\n        // Invoke original onBlur if present\n        if (this.props.onBlur) {\n          this.props.onBlur(event);\n        }\n      }\n    } : {};\n\n\n    return React.createElement(element, {\n      ...props,\n      onChange: this.onChange,\n      value: this.state.value,\n      ...onKeyDown,\n      ...onBlur\n    });\n  }\n});\n"]}